@tailwind base;
@tailwind components;
@tailwind utilities;
@import "katex/dist/katex.min.css";

/* Allow flex children to actually shrink (precaution) */
.min-w-0 { min-width: 0; } /* Tailwind v3 has this utility, but keep as fallback */

/* KaTeX block equations: don't expand the page, let them scroll inside themselves */
.katex-display {
  display: block;             /* ensure it's a block box */
  max-width: 100%;            /* never wider than container */
  overflow-x: auto;          /* horizontal scroll inside the equation if it is too wide */
  -webkit-overflow-scrolling: touch;
  margin: 1rem 0;
}

/* Don't force wrapping inside the rendered katex component, keep it single-line (so it can scroll) */
.katex-display > .katex {
  white-space: nowrap;
}

/* Inline math should wrap like normal text; but if it overflows, it will break due to 'break-words' */
.katex {
  color: hsl(var(--foreground));
  font-size: 1em;
}

/* Prose tweaks (if you're using the prose class from @tailwindcss/typography) */
.prose {
  /* remove default max width that can conflict with our layout */
  max-width: 100%;
}

/* If you want safer handling for extremely long tokens (URLs etc): */
.break-words {
  word-break: break-word;
  overflow-wrap: anywhere;
}

/* Optional: hide tiny visual overflow artifacts coming from math render */
.prose :where(.katex, .katex-display) {
  box-sizing: border-box;
  min-width: 0;
}


/* Definition of the design system. All colors, gradients, fonts, etc should be defined here. 
All colors MUST be HSL.
*/


@layer base {
  :root {
    --background: 0 0% 100%; /* white */
    --foreground: 210 15% 20%; /* dark text */

    --card: 0 0% 98%;
    --card-foreground: 210 15% 20%;

    --popover: 0 0% 98%;
    --popover-foreground: 210 15% 20%;

    --primary: 220 90% 55%;
    --primary-foreground: 0 0% 100%;

    --secondary: 210 16% 90%;
    --secondary-foreground: 210 15% 20%;

    --muted: 210 20% 96%;
    --muted-foreground: 210 15% 40%;

    --accent: 220 90% 55%;
    --accent-foreground: 0 0% 100%;

    --destructive: 0 72% 51%;
    --destructive-foreground: 0 0% 100%;

    --border: 210 15% 85%;
    --input: 210 15% 95%;
    --ring: 220 90% 55%;

    --radius: 0.5rem;

    --editor-bg: 0 0% 98%;
    --panel-bg: 0 0% 98%;
    --panel-border: 210 15% 85%;
    --output-bg: 210 15% 97%;
  }
}


@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', sans-serif;
  }

  code, pre {
    font-family: 'Fira Code', 'Monaco', 'Courier New', monospace;
  }
}

@layer utilities {
  .code-editor {
    @apply bg-[hsl(var(--editor-bg))] rounded-lg overflow-hidden;
  }
  
  .panel {
    @apply bg-[hsl(var(--panel-bg))] border border-[hsl(var(--panel-border))] rounded-lg;
  }

  .transition-smooth {
    transition: var(--transition-smooth);
  }
}
